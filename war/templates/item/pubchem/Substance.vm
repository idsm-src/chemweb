#set($SID = $entity.getValue().replaceAll(".*/SID", ""))

#sparql($compound)
  SELECT ?COMPOUND FROM pubchem:substance WHERE
  {
    $entity sio:CHEMINF_000477 ?COMPOUND
  }
#end

#if($compound.COMPOUND)
  #set($CID = $compound.COMPOUND.getValue().replaceAll(".*/CID", ""))

  #sparql($value)
    SELECT ?VALUE FROM descriptor:compound WHERE
    {
      descriptor:CID${CID}_Preferred_IUPAC_Name sio:has-value ?VALUE
    }
  #end

  #sparql($structure)
    SELECT (true as ?R) WHERE
    {
      ?S rdf:type sio:SIO_011120.
      ?S sio:is-attribute-of compound:CID$CID.
      ?S sio:has-value ?V.
    }
  #end
#end

<table style="width:100%">
  <tr>
    #if($structure.count > 0)
    <td style="width:90px">
      <table style="width:80px">
        <tr>
          <td>
            <img src="compound/image?w=160&id=$CID" alt="CID$CID" height="80" width="80">
          </td>
        </tr>
      </table>
    </td>
    #end
    <td>
      <table>
        <tr>
          <td ><b>SID$SID</b></td>
        </tr>
        #if($value.VALUE)
        <tr>
          <td>
            <span style="white-space: pre-wrap; word-wrap: break-word;">#escapeHTML($value.VALUE)</span>
          </td>
        </tr>
        #end
      </table>
    </td>
  </tr>
</table>
